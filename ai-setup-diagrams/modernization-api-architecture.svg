<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 850">
  <defs>
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#1a1a2e"/>
      <stop offset="100%" style="stop-color:#16213e"/>
    </linearGradient>
    <linearGradient id="apiGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#6c5ce7"/>
      <stop offset="100%" style="stop-color:#a29bfe"/>
    </linearGradient>
    <linearGradient id="serviceGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#00b894"/>
      <stop offset="100%" style="stop-color:#55efc4"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
    <marker id="arrowPurple" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#6c5ce7"/>
    </marker>
    <marker id="arrowGreen" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#00b894"/>
    </marker>
  </defs>

  <!-- Background -->
  <rect width="1400" height="850" fill="#0a0a0f"/>

  <!-- Header -->
  <rect x="0" y="0" width="1400" height="60" fill="url(#headerGrad)"/>
  <text x="700" y="38" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="24" font-weight="bold">Legacy Modernization API Architecture</text>
  <text x="1380" y="38" text-anchor="end" fill="#888" font-family="Arial, sans-serif" font-size="12">FastAPI :8002 | AI-Powered Analysis</text>

  <!-- Main API Container -->
  <g filter="url(#shadow)" transform="translate(50, 80)">
    <rect x="0" y="0" width="600" height="700" rx="20" fill="#1a1a2e" stroke="#6c5ce7" stroke-width="3"/>

    <!-- Title -->
    <rect x="0" y="0" width="600" height="55" rx="20" fill="url(#apiGrad)"/>
    <rect x="0" y="40" width="600" height="15" fill="url(#apiGrad)"/>
    <text x="300" y="35" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="16" font-weight="bold">‚ö° Modernization API (app/main.py)</text>
  </g>

  <!-- Root Endpoint -->
  <g filter="url(#shadow)" transform="translate(70, 155)">
    <rect x="0" y="0" width="260" height="80" rx="12" fill="#2d3436"/>
    <text x="130" y="25" text-anchor="middle" fill="#6c5ce7" font-family="Arial, sans-serif" font-size="12" font-weight="bold">üìç Root Endpoint</text>
    <rect x="15" y="40" width="230" height="30" rx="5" fill="#1a1a2e"/>
    <text x="25" y="60" fill="#a29bfe" font-family="monospace" font-size="10">GET /</text>
    <text x="70" y="60" fill="#888" font-family="monospace" font-size="9">‚Üí API info, version: 1.0.0</text>
  </g>

  <!-- Health Router -->
  <g filter="url(#shadow)" transform="translate(70, 250)">
    <rect x="0" y="0" width="260" height="140" rx="12" fill="url(#serviceGrad)"/>
    <text x="130" y="28" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="13" font-weight="bold">health.router</text>
    <text x="130" y="48" text-anchor="middle" fill="#006060" font-family="Arial, sans-serif" font-size="10">prefix: /api/v1</text>

    <rect x="15" y="60" width="230" height="65" rx="8" fill="rgba(0,0,0,0.2)"/>
    <text x="25" y="80" fill="#1a1a2e" font-family="monospace" font-size="10">GET /health</text>
    <text x="25" y="97" fill="#006060" font-family="monospace" font-size="8">‚Üí Service health status</text>
    <text x="25" y="115" fill="#006060" font-family="monospace" font-size="8">‚Üí DB, Redis, Ollama checks</text>
  </g>

  <!-- Analysis Router -->
  <g filter="url(#shadow)" transform="translate(70, 410)">
    <rect x="0" y="0" width="560" height="280" rx="12" fill="#2d3436"/>
    <text x="280" y="28" text-anchor="middle" fill="#e17055" font-family="Arial, sans-serif" font-size="14" font-weight="bold">analysis.router</text>
    <text x="280" y="48" text-anchor="middle" fill="#888" font-family="Arial, sans-serif" font-size="10">prefix: /api/v1 | tags: ["analysis"]</text>

    <!-- Endpoints Grid -->
    <g transform="translate(15, 65)">
      <rect x="0" y="0" width="255" height="60" rx="8" fill="#1a1a2e"/>
      <text x="10" y="20" fill="#fab1a0" font-family="monospace" font-size="10">POST /analysis/jobs</text>
      <text x="10" y="40" fill="#888" font-family="monospace" font-size="8">‚Üí Create new analysis job</text>
      <text x="10" y="55" fill="#636e72" font-family="monospace" font-size="7">Submit code for AI analysis</text>

      <rect x="270" y="0" width="255" height="60" rx="8" fill="#1a1a2e"/>
      <text x="280" y="20" fill="#fab1a0" font-family="monospace" font-size="10">GET /analysis/jobs</text>
      <text x="280" y="40" fill="#888" font-family="monospace" font-size="8">‚Üí List all analysis jobs</text>
      <text x="280" y="55" fill="#636e72" font-family="monospace" font-size="7">Filter by status, date</text>

      <rect x="0" y="70" width="255" height="60" rx="8" fill="#1a1a2e"/>
      <text x="10" y="90" fill="#fab1a0" font-family="monospace" font-size="10">GET /analysis/jobs/{id}</text>
      <text x="10" y="110" fill="#888" font-family="monospace" font-size="8">‚Üí Get job details + results</text>
      <text x="10" y="125" fill="#636e72" font-family="monospace" font-size="7">Include AI recommendations</text>

      <rect x="270" y="70" width="255" height="60" rx="8" fill="#1a1a2e"/>
      <text x="280" y="90" fill="#fab1a0" font-family="monospace" font-size="10">DELETE /analysis/jobs/{id}</text>
      <text x="280" y="110" fill="#888" font-family="monospace" font-size="8">‚Üí Cancel/delete job</text>
      <text x="280" y="125" fill="#636e72" font-family="monospace" font-size="7">Cleanup artifacts</text>

      <rect x="0" y="140" width="525" height="55" rx="8" fill="#1a1a2e"/>
      <text x="10" y="160" fill="#fab1a0" font-family="monospace" font-size="10">GET /analysis/jobs/{id}/download</text>
      <text x="10" y="180" fill="#888" font-family="monospace" font-size="8">‚Üí Download analysis report (PDF/JSON)</text>
    </g>
  </g>

  <!-- Config Section -->
  <g filter="url(#shadow)" transform="translate(350, 155)">
    <rect x="0" y="0" width="280" height="150" rx="12" fill="#2d3436"/>
    <text x="140" y="25" text-anchor="middle" fill="#ffd93d" font-family="Arial, sans-serif" font-size="12" font-weight="bold">‚öôÔ∏è Configuration (config.py)</text>

    <rect x="15" y="45" width="250" height="90" rx="8" fill="#1a1a2e"/>
    <text x="25" y="65" fill="#ffd93d" font-family="monospace" font-size="9">DATABASE_URL</text>
    <text x="140" y="65" fill="#888" font-family="monospace" font-size="8">‚Üí PostgreSQL</text>
    <text x="25" y="83" fill="#ffd93d" font-family="monospace" font-size="9">REDIS_URL</text>
    <text x="140" y="83" fill="#888" font-family="monospace" font-size="8">‚Üí Queue/Cache</text>
    <text x="25" y="101" fill="#ffd93d" font-family="monospace" font-size="9">OLLAMA_URL</text>
    <text x="140" y="101" fill="#888" font-family="monospace" font-size="8">‚Üí LLM Server</text>
    <text x="25" y="119" fill="#ffd93d" font-family="monospace" font-size="9">MINIO_ENDPOINT</text>
    <text x="140" y="119" fill="#888" font-family="monospace" font-size="8">‚Üí Object Storage</text>
    <text x="25" y="137" fill="#ffd93d" font-family="monospace" font-size="9">CHROMADB_URL</text>
    <text x="140" y="137" fill="#888" font-family="monospace" font-size="8">‚Üí Vector DB</text>
  </g>

  <!-- Dependencies Section -->
  <g filter="url(#shadow)" transform="translate(700, 80)">
    <rect x="0" y="0" width="650" height="400" rx="20" fill="#1a1a2e" stroke="#00b894" stroke-width="2"/>
    <text x="325" y="35" text-anchor="middle" fill="#00b894" font-family="Arial, sans-serif" font-size="16" font-weight="bold">üîó External Dependencies</text>

    <!-- PostgreSQL -->
    <g filter="url(#shadow)" transform="translate(20, 55)">
      <rect x="0" y="0" width="190" height="100" rx="10" fill="#0984e3"/>
      <text x="95" y="25" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="12" font-weight="bold">üêò PostgreSQL</text>
      <text x="15" y="50" fill="#e0e0e0" font-family="monospace" font-size="9">postgres:5432</text>
      <text x="15" y="70" fill="#e0e0e0" font-family="monospace" font-size="8">Database: modernization</text>
      <text x="15" y="88" fill="#74b9ff" font-family="monospace" font-size="8">Jobs, results, metadata</text>
    </g>

    <!-- Redis -->
    <g filter="url(#shadow)" transform="translate(230, 55)">
      <rect x="0" y="0" width="190" height="100" rx="10" fill="#e17055"/>
      <text x="95" y="25" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="12" font-weight="bold">üî¥ Redis</text>
      <text x="15" y="50" fill="#e0e0e0" font-family="monospace" font-size="9">redis:6379</text>
      <text x="15" y="70" fill="#e0e0e0" font-family="monospace" font-size="8">Job queue, caching</text>
      <text x="15" y="88" fill="#ffd0c0" font-family="monospace" font-size="8">Session management</text>
    </g>

    <!-- MinIO -->
    <g filter="url(#shadow)" transform="translate(440, 55)">
      <rect x="0" y="0" width="190" height="100" rx="10" fill="#636e72"/>
      <text x="95" y="25" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="12" font-weight="bold">üì¶ MinIO</text>
      <text x="15" y="50" fill="#e0e0e0" font-family="monospace" font-size="9">minio:9000</text>
      <text x="15" y="70" fill="#e0e0e0" font-family="monospace" font-size="8">Source code storage</text>
      <text x="15" y="88" fill="#b2bec3" font-family="monospace" font-size="8">Analysis artifacts</text>
    </g>

    <!-- Ollama -->
    <g filter="url(#shadow)" transform="translate(20, 175)">
      <rect x="0" y="0" width="190" height="100" rx="10" fill="#00cec9"/>
      <text x="95" y="25" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="12" font-weight="bold">ü§ñ Ollama</text>
      <text x="15" y="50" fill="#1a1a2e" font-family="monospace" font-size="9">ollama:11434</text>
      <text x="15" y="70" fill="#006060" font-family="monospace" font-size="8">Code analysis AI</text>
      <text x="15" y="88" fill="#006060" font-family="monospace" font-size="8">qwen2.5-coder:32b</text>
    </g>

    <!-- ChromaDB -->
    <g filter="url(#shadow)" transform="translate(230, 175)">
      <rect x="0" y="0" width="190" height="100" rx="10" fill="#fd79a8"/>
      <text x="95" y="25" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="12" font-weight="bold">üß† ChromaDB</text>
      <text x="15" y="50" fill="#1a1a2e" font-family="monospace" font-size="9">chromadb:8000</text>
      <text x="15" y="70" fill="#8e3060" font-family="monospace" font-size="8">Pattern storage</text>
      <text x="15" y="88" fill="#8e3060" font-family="monospace" font-size="8">Embedding search</text>
    </g>

    <!-- Dependency Info -->
    <g transform="translate(20, 295)">
      <rect x="0" y="0" width="610" height="90" rx="10" fill="#2d3436"/>
      <text x="305" y="25" text-anchor="middle" fill="#ffd93d" font-family="Arial, sans-serif" font-size="12" font-weight="bold">üìã Docker Compose Dependencies</text>
      <text x="20" y="50" fill="#e0e0e0" font-family="monospace" font-size="9">depends_on: [postgres, redis, minio, chromadb, ollama]</text>
      <text x="20" y="70" fill="#888" font-family="monospace" font-size="8">All services must be healthy before API starts</text>
      <text x="20" y="85" fill="#888" font-family="monospace" font-size="8">healthcheck: python -c "requests.get('http://localhost:8000/api/v1/health')"</text>
    </g>
  </g>

  <!-- Analysis Workflow -->
  <g filter="url(#shadow)" transform="translate(700, 500)">
    <rect x="0" y="0" width="650" height="280" rx="20" fill="#1a1a2e" stroke="#e17055" stroke-width="2"/>
    <text x="325" y="35" text-anchor="middle" fill="#e17055" font-family="Arial, sans-serif" font-size="16" font-weight="bold">üîÑ Analysis Job Workflow</text>

    <!-- Steps -->
    <g transform="translate(20, 55)">
      <rect x="0" y="0" width="140" height="70" rx="8" fill="#6c5ce7"/>
      <text x="70" y="25" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="10" font-weight="bold">1. Submit</text>
      <text x="70" y="45" text-anchor="middle" fill="#e0e0e0" font-family="monospace" font-size="8">POST /jobs</text>
      <text x="70" y="60" text-anchor="middle" fill="#e0e0e0" font-family="monospace" font-size="7">Upload code</text>
    </g>

    <line x1="160" y1="90" x2="180" y2="90" stroke="#6c5ce7" stroke-width="2" marker-end="url(#arrowPurple)"/>

    <g transform="translate(180, 55)">
      <rect x="0" y="0" width="140" height="70" rx="8" fill="#e17055"/>
      <text x="70" y="25" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="10" font-weight="bold">2. Queue</text>
      <text x="70" y="45" text-anchor="middle" fill="#e0e0e0" font-family="monospace" font-size="8">Redis enqueue</text>
      <text x="70" y="60" text-anchor="middle" fill="#e0e0e0" font-family="monospace" font-size="7">Background job</text>
    </g>

    <line x1="320" y1="90" x2="340" y2="90" stroke="#e17055" stroke-width="2"/>

    <g transform="translate(340, 55)">
      <rect x="0" y="0" width="140" height="70" rx="8" fill="#00cec9"/>
      <text x="70" y="25" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="10" font-weight="bold">3. Analyze</text>
      <text x="70" y="45" text-anchor="middle" fill="#006060" font-family="monospace" font-size="8">Ollama LLM</text>
      <text x="70" y="60" text-anchor="middle" fill="#006060" font-family="monospace" font-size="7">AI analysis</text>
    </g>

    <line x1="480" y1="90" x2="500" y2="90" stroke="#00cec9" stroke-width="2"/>

    <g transform="translate(500, 55)">
      <rect x="0" y="0" width="130" height="70" rx="8" fill="#00b894"/>
      <text x="65" y="25" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="10" font-weight="bold">4. Complete</text>
      <text x="65" y="45" text-anchor="middle" fill="#006060" font-family="monospace" font-size="8">Store results</text>
      <text x="65" y="60" text-anchor="middle" fill="#006060" font-family="monospace" font-size="7">DB + MinIO</text>
    </g>

    <!-- Job Status -->
    <g transform="translate(20, 145)">
      <rect x="0" y="0" width="610" height="55" rx="8" fill="#2d3436"/>
      <text x="20" y="20" fill="#ffd93d" font-family="Arial, sans-serif" font-size="11" font-weight="bold">Job Statuses:</text>
      <text x="20" y="42" fill="#a29bfe" font-family="monospace" font-size="9">PENDING</text>
      <text x="100" y="42" fill="#fab1a0" font-family="monospace" font-size="9">‚Üí PROCESSING</text>
      <text x="230" y="42" fill="#81ecec" font-family="monospace" font-size="9">‚Üí ANALYZING</text>
      <text x="360" y="42" fill="#55efc4" font-family="monospace" font-size="9">‚Üí COMPLETED</text>
      <text x="480" y="42" fill="#e17055" font-family="monospace" font-size="9">| FAILED</text>
    </g>

    <!-- Output -->
    <g transform="translate(20, 210)">
      <rect x="0" y="0" width="610" height="55" rx="8" fill="#2d3436"/>
      <text x="20" y="20" fill="#00b894" font-family="Arial, sans-serif" font-size="11" font-weight="bold">Analysis Output:</text>
      <text x="20" y="42" fill="#888" font-family="monospace" font-size="9">‚Ä¢ Code patterns identified | ‚Ä¢ Modernization recommendations | ‚Ä¢ Migration plan | ‚Ä¢ Effort estimation</text>
    </g>
  </g>

  <!-- Footer -->
  <text x="700" y="830" text-anchor="middle" fill="#555" font-family="Arial, sans-serif" font-size="11">AI-Powered DevOps Platform | Legacy Modernization API | AI-Driven Code Analysis &amp; Migration Planning</text>
</svg>