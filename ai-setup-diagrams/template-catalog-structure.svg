<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 900">
  <defs>
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#1a1a2e"/>
      <stop offset="100%" style="stop-color:#16213e"/>
    </linearGradient>
    <linearGradient id="catalogGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#9b59b6"/>
      <stop offset="100%" style="stop-color:#8e44ad"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="1400" height="900" fill="#0a0a0f"/>

  <!-- Header -->
  <rect x="0" y="0" width="1400" height="60" fill="url(#headerGrad)"/>
  <text x="700" y="38" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="24" font-weight="bold">Template Catalog Structure</text>
  <text x="1380" y="38" text-anchor="end" fill="#888" font-family="Arial, sans-serif" font-size="12">RAG Templates &amp; Base Images</text>

  <!-- Catalog.json Overview -->
  <g transform="translate(50, 80)">
    <text x="0" y="0" fill="#9b59b6" font-family="Arial, sans-serif" font-size="16" font-weight="bold">catalog.json - Base Image Registry Mapping</text>

    <g filter="url(#shadow)" transform="translate(0, 30)">
      <rect x="0" y="0" width="1300" height="220" rx="15" fill="#1a1a2e"/>

      <!-- Java -->
      <g transform="translate(20, 20)">
        <rect x="0" y="0" width="240" height="180" rx="10" fill="rgba(108,92,231,0.3)"/>
        <text x="120" y="25" text-anchor="middle" fill="#a29bfe" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Java</text>
        <rect x="10" y="40" width="220" height="130" rx="6" fill="rgba(0,0,0,0.3)"/>
        <text x="20" y="60" fill="#ffd93d" font-family="monospace" font-size="8">"java": {</text>
        <text x="30" y="78" fill="#e0e0e0" font-family="monospace" font-size="8">"base": "eclipse-temurin",</text>
        <text x="30" y="96" fill="#e0e0e0" font-family="monospace" font-size="8">"versions": ["17", "21"],</text>
        <text x="30" y="114" fill="#e0e0e0" font-family="monospace" font-size="8">"build_tool": "maven",</text>
        <text x="30" y="132" fill="#81ecec" font-family="monospace" font-size="8">"registry": "localhost:5001"</text>
        <text x="20" y="150" fill="#ffd93d" font-family="monospace" font-size="8">}</text>
      </g>

      <!-- Python -->
      <g transform="translate(280, 20)">
        <rect x="0" y="0" width="240" height="180" rx="10" fill="rgba(52,152,219,0.3)"/>
        <text x="120" y="25" text-anchor="middle" fill="#3498db" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Python</text>
        <rect x="10" y="40" width="220" height="130" rx="6" fill="rgba(0,0,0,0.3)"/>
        <text x="20" y="60" fill="#ffd93d" font-family="monospace" font-size="8">"python": {</text>
        <text x="30" y="78" fill="#e0e0e0" font-family="monospace" font-size="8">"base": "python",</text>
        <text x="30" y="96" fill="#e0e0e0" font-family="monospace" font-size="8">"versions": ["3.11","3.10"],</text>
        <text x="30" y="114" fill="#e0e0e0" font-family="monospace" font-size="8">"package_mgr": "pip",</text>
        <text x="30" y="132" fill="#81ecec" font-family="monospace" font-size="8">"registry": "localhost:5001"</text>
        <text x="20" y="150" fill="#ffd93d" font-family="monospace" font-size="8">}</text>
      </g>

      <!-- Node.js -->
      <g transform="translate(540, 20)">
        <rect x="0" y="0" width="240" height="180" rx="10" fill="rgba(39,174,96,0.3)"/>
        <text x="120" y="25" text-anchor="middle" fill="#27ae60" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Node.js</text>
        <rect x="10" y="40" width="220" height="130" rx="6" fill="rgba(0,0,0,0.3)"/>
        <text x="20" y="60" fill="#ffd93d" font-family="monospace" font-size="8">"node": {</text>
        <text x="30" y="78" fill="#e0e0e0" font-family="monospace" font-size="8">"base": "node",</text>
        <text x="30" y="96" fill="#e0e0e0" font-family="monospace" font-size="8">"versions": ["20","18"],</text>
        <text x="30" y="114" fill="#e0e0e0" font-family="monospace" font-size="8">"package_mgr": "npm",</text>
        <text x="30" y="132" fill="#81ecec" font-family="monospace" font-size="8">"registry": "localhost:5001"</text>
        <text x="20" y="150" fill="#ffd93d" font-family="monospace" font-size="8">}</text>
      </g>

      <!-- Go -->
      <g transform="translate(800, 20)">
        <rect x="0" y="0" width="240" height="180" rx="10" fill="rgba(0,188,212,0.3)"/>
        <text x="120" y="25" text-anchor="middle" fill="#00bcd4" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Golang</text>
        <rect x="10" y="40" width="220" height="130" rx="6" fill="rgba(0,0,0,0.3)"/>
        <text x="20" y="60" fill="#ffd93d" font-family="monospace" font-size="8">"golang": {</text>
        <text x="30" y="78" fill="#e0e0e0" font-family="monospace" font-size="8">"base": "golang",</text>
        <text x="30" y="96" fill="#e0e0e0" font-family="monospace" font-size="8">"versions": ["1.21","1.20"],</text>
        <text x="30" y="114" fill="#e0e0e0" font-family="monospace" font-size="8">"runtime": "scratch",</text>
        <text x="30" y="132" fill="#81ecec" font-family="monospace" font-size="8">"registry": "localhost:5001"</text>
        <text x="20" y="150" fill="#ffd93d" font-family="monospace" font-size="8">}</text>
      </g>

      <!-- .NET -->
      <g transform="translate(1060, 20)">
        <rect x="0" y="0" width="220" height="180" rx="10" fill="rgba(81,45,168,0.3)"/>
        <text x="110" y="25" text-anchor="middle" fill="#673ab7" font-family="Arial, sans-serif" font-size="12" font-weight="bold">.NET</text>
        <rect x="10" y="40" width="200" height="130" rx="6" fill="rgba(0,0,0,0.3)"/>
        <text x="20" y="60" fill="#ffd93d" font-family="monospace" font-size="8">"dotnet": {</text>
        <text x="30" y="78" fill="#e0e0e0" font-family="monospace" font-size="8">"base": "mcr/dotnet",</text>
        <text x="30" y="96" fill="#e0e0e0" font-family="monospace" font-size="8">"versions": ["8.0","7.0"],</text>
        <text x="30" y="114" fill="#e0e0e0" font-family="monospace" font-size="8">"sdk": true,</text>
        <text x="30" y="132" fill="#81ecec" font-family="monospace" font-size="8">"registry": "local"</text>
        <text x="20" y="150" fill="#ffd93d" font-family="monospace" font-size="8">}</text>
      </g>
    </g>
  </g>

  <!-- ChromaDB Collections -->
  <g transform="translate(50, 350)">
    <text x="0" y="0" fill="#00b894" font-family="Arial, sans-serif" font-size="16" font-weight="bold">ChromaDB Template Collections</text>

    <g filter="url(#shadow)" transform="translate(0, 25)">
      <rect x="0" y="0" width="420" height="240" rx="15" fill="#2d3436"/>
      <text x="210" y="30" text-anchor="middle" fill="#00b894" font-family="Arial, sans-serif" font-size="14" font-weight="bold">templates_dockerfile</text>

      <rect x="15" y="45" width="390" height="180" rx="10" fill="rgba(0,0,0,0.3)"/>
      <text x="30" y="70" fill="#ffd93d" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Documents:</text>
      <text x="40" y="90" fill="#e0e0e0" font-family="monospace" font-size="8">Multi-stage Dockerfile templates</text>
      <text x="40" y="108" fill="#e0e0e0" font-family="monospace" font-size="8">Per technology (Java, Python, Node...)</text>

      <text x="30" y="130" fill="#81ecec" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Metadata:</text>
      <text x="40" y="150" fill="#888" font-family="monospace" font-size="8">technology, base_image, version</text>
      <text x="40" y="168" fill="#888" font-family="monospace" font-size="8">build_args, exposed_ports</text>

      <text x="30" y="190" fill="#ffd93d" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Embedding:</text>
      <text x="40" y="210" fill="#888" font-family="monospace" font-size="8">all-MiniLM-L6-v2 (384 dims)</text>
    </g>

    <!-- templates_gitlab -->
    <g filter="url(#shadow)" transform="translate(450, 25)">
      <rect x="0" y="0" width="420" height="240" rx="15" fill="#2d3436"/>
      <text x="210" y="30" text-anchor="middle" fill="#e17055" font-family="Arial, sans-serif" font-size="14" font-weight="bold">templates_gitlab</text>

      <rect x="15" y="45" width="390" height="180" rx="10" fill="rgba(0,0,0,0.3)"/>
      <text x="30" y="70" fill="#ffd93d" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Documents:</text>
      <text x="40" y="90" fill="#e0e0e0" font-family="monospace" font-size="8">.gitlab-ci.yml templates</text>
      <text x="40" y="108" fill="#e0e0e0" font-family="monospace" font-size="8">8-stage pipeline configurations</text>

      <text x="30" y="130" fill="#81ecec" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Metadata:</text>
      <text x="40" y="150" fill="#888" font-family="monospace" font-size="8">technology, stages[], variables</text>
      <text x="40" y="168" fill="#888" font-family="monospace" font-size="8">nexus_images, services</text>

      <text x="30" y="190" fill="#ffd93d" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Embedding:</text>
      <text x="40" y="210" fill="#888" font-family="monospace" font-size="8">all-MiniLM-L6-v2 (384 dims)</text>
    </g>

    <!-- golden_rules -->
    <g filter="url(#shadow)" transform="translate(900, 25)">
      <rect x="0" y="0" width="350" height="240" rx="15" fill="#2d3436"/>
      <text x="175" y="30" text-anchor="middle" fill="#ffd93d" font-family="Arial, sans-serif" font-size="14" font-weight="bold">golden_rules</text>

      <rect x="15" y="45" width="320" height="180" rx="10" fill="rgba(0,0,0,0.3)"/>
      <text x="30" y="70" fill="#ffd93d" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Documents:</text>
      <text x="40" y="90" fill="#e0e0e0" font-family="monospace" font-size="8">Best practices &amp; rules</text>
      <text x="40" y="108" fill="#e0e0e0" font-family="monospace" font-size="8">Security guidelines</text>

      <text x="30" y="130" fill="#81ecec" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Examples:</text>
      <text x="40" y="150" fill="#888" font-family="monospace" font-size="8">Use Nexus registry ONLY</text>
      <text x="40" y="168" fill="#888" font-family="monospace" font-size="8">Multi-stage builds</text>
      <text x="40" y="186" fill="#888" font-family="monospace" font-size="8">Non-root user</text>
      <text x="40" y="204" fill="#888" font-family="monospace" font-size="8">Minimal base images</text>
    </g>
  </g>

  <!-- Template Usage Flow -->
  <g transform="translate(50, 640)">
    <text x="0" y="0" fill="#6c5ce7" font-family="Arial, sans-serif" font-size="16" font-weight="bold">Template Retrieval &amp; Generation Flow</text>

    <g filter="url(#shadow)" transform="translate(0, 25)">
      <rect x="0" y="0" width="1300" height="180" rx="15" fill="#1a1a2e"/>

      <!-- User Query -->
      <g transform="translate(30, 30)">
        <rect x="0" y="0" width="170" height="60" rx="8" fill="#2d3436" stroke="#ffd93d" stroke-width="2"/>
        <text x="85" y="25" text-anchor="middle" fill="#ffd93d" font-family="Arial, sans-serif" font-size="10" font-weight="bold">User Query</text>
        <text x="85" y="43" text-anchor="middle" fill="#888" font-family="monospace" font-size="7">"Java Spring Boot app"</text>
      </g>

      <text x="215" y="60" fill="#ffd93d" font-family="Arial, sans-serif" font-size="16">→</text>

      <!-- RAG Query -->
      <g transform="translate(240, 30)">
        <rect x="0" y="0" width="170" height="60" rx="8" fill="#9b59b6"/>
        <text x="85" y="25" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Embed Query</text>
        <text x="85" y="43" text-anchor="middle" fill="#e0e0e0" font-family="monospace" font-size="7">ChromaDB search</text>
      </g>

      <text x="425" y="60" fill="#ffd93d" font-family="Arial, sans-serif" font-size="16">→</text>

      <!-- Template Match -->
      <g transform="translate(450, 30)">
        <rect x="0" y="0" width="170" height="60" rx="8" fill="#00b894"/>
        <text x="85" y="25" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Template Match</text>
        <text x="85" y="43" text-anchor="middle" fill="#006060" font-family="monospace" font-size="7">java/dockerfile.tmpl</text>
      </g>

      <text x="635" y="60" fill="#ffd93d" font-family="Arial, sans-serif" font-size="16">→</text>

      <!-- Catalog Lookup -->
      <g transform="translate(660, 30)">
        <rect x="0" y="0" width="170" height="60" rx="8" fill="#e17055"/>
        <text x="85" y="25" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Catalog Lookup</text>
        <text x="85" y="43" text-anchor="middle" fill="#e0e0e0" font-family="monospace" font-size="7">catalog.json → base</text>
      </g>

      <text x="845" y="60" fill="#ffd93d" font-family="Arial, sans-serif" font-size="16">→</text>

      <!-- LLM Generation -->
      <g transform="translate(870, 30)">
        <rect x="0" y="0" width="170" height="60" rx="8" fill="#6c5ce7"/>
        <text x="85" y="25" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="10" font-weight="bold">LLM Generate</text>
        <text x="85" y="43" text-anchor="middle" fill="#e0e0e0" font-family="monospace" font-size="7">qwen2.5-coder:32b</text>
      </g>

      <text x="1055" y="60" fill="#ffd93d" font-family="Arial, sans-serif" font-size="16">→</text>

      <!-- Output -->
      <g transform="translate(1080, 30)">
        <rect x="0" y="0" width="170" height="60" rx="8" fill="#2d3436" stroke="#00b894" stroke-width="2"/>
        <text x="85" y="25" text-anchor="middle" fill="#00b894" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Dockerfile</text>
        <text x="85" y="43" text-anchor="middle" fill="#888" font-family="monospace" font-size="7">+ .gitlab-ci.yml</text>
      </g>

      <!-- API Endpoint -->
      <rect x="30" y="110" width="1240" height="55" rx="8" fill="rgba(0,0,0,0.3)"/>
      <text x="50" y="135" fill="#ffd93d" font-family="Arial, sans-serif" font-size="10" font-weight="bold">RAG API Endpoints (generator_api.py):</text>
      <text x="50" y="155" fill="#888" font-family="monospace" font-size="9">POST /generate/dockerfile | POST /generate/gitlabci | GET /catalog | POST /validate/dockerfile</text>
    </g>
  </g>

  <!-- Footer -->
  <text x="700" y="880" text-anchor="middle" fill="#555" font-family="Arial, sans-serif" font-size="11">AI-Powered DevOps Platform | Template Catalog | RAG-Enhanced Configuration Generation</text>
</svg>