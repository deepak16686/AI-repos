<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 950">
  <defs>
    <linearGradient id="headerGrad" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#1a1a2e"/>
      <stop offset="100%" style="stop-color:#16213e"/>
    </linearGradient>
    <linearGradient id="stageGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#6c5ce7"/>
      <stop offset="100%" style="stop-color:#a29bfe"/>
    </linearGradient>
    <linearGradient id="langGrad" x1="0%" y1="0%" x2="0%" y2="100%">
      <stop offset="0%" style="stop-color:#e17055"/>
      <stop offset="100%" style="stop-color:#fab1a0"/>
    </linearGradient>
    <filter id="shadow" x="-20%" y="-20%" width="140%" height="140%">
      <feDropShadow dx="2" dy="2" stdDeviation="3" flood-opacity="0.3"/>
    </filter>
  </defs>

  <!-- Background -->
  <rect width="1400" height="950" fill="#0a0a0f"/>

  <!-- Header -->
  <rect x="0" y="0" width="1400" height="60" fill="url(#headerGrad)"/>
  <text x="700" y="38" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="24" font-weight="bold">Pipeline Generator Tool - Detailed Architecture</text>
  <text x="1380" y="38" text-anchor="end" fill="#888" font-family="Arial, sans-serif" font-size="12">gitlab_pipeline_generator</text>

  <!-- Tool Info Box -->
  <g filter="url(#shadow)" transform="translate(50, 80)">
    <rect x="0" y="0" width="400" height="120" rx="15" fill="#2d3436" stroke="#6c5ce7" stroke-width="2"/>
    <text x="200" y="30" text-anchor="middle" fill="#6c5ce7" font-family="Arial, sans-serif" font-size="16" font-weight="bold">Tool Configuration</text>
    <text x="20" y="55" fill="#ffd93d" font-family="Arial, sans-serif" font-size="10" font-weight="bold">ID:</text>
    <text x="60" y="55" fill="#e0e0e0" font-family="monospace" font-size="10">gitlab_pipeline_generator</text>
    <text x="20" y="75" fill="#ffd93d" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Registry:</text>
    <text x="80" y="75" fill="#e0e0e0" font-family="monospace" font-size="10">http://ai-nexus:5001</text>
    <text x="20" y="95" fill="#ffd93d" font-family="Arial, sans-serif" font-size="10" font-weight="bold">Pull Registry:</text>
    <text x="100" y="95" fill="#e0e0e0" font-family="monospace" font-size="10">localhost:5001</text>
  </g>

  <!-- Function Signature -->
  <g filter="url(#shadow)" transform="translate(480, 80)">
    <rect x="0" y="0" width="470" height="120" rx="15" fill="#1a1a2e" stroke="#00b894" stroke-width="2"/>
    <text x="235" y="30" text-anchor="middle" fill="#00b894" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Function Signature</text>
    <rect x="15" y="45" width="440" height="60" rx="8" fill="rgba(0,0,0,0.3)"/>
    <text x="25" y="70" fill="#ffd93d" font-family="monospace" font-size="10">def get_pipeline_template(</text>
    <text x="40" y="90" fill="#e0e0e0" font-family="monospace" font-size="10">technology: str = "java",</text>
    <text x="40" y="105" fill="#e0e0e0" font-family="monospace" font-size="10">stages: str = "all") -&gt; str</text>
  </g>

  <!-- Variables Template -->
  <g filter="url(#shadow)" transform="translate(980, 80)">
    <rect x="0" y="0" width="370" height="120" rx="15" fill="#1a1a2e" stroke="#e17055" stroke-width="2"/>
    <text x="185" y="30" text-anchor="middle" fill="#e17055" font-family="Arial, sans-serif" font-size="14" font-weight="bold">Pipeline Variables</text>
    <text x="20" y="55" fill="#888" font-family="monospace" font-size="8">NEXUS_REGISTRY: ai-nexus:5001</text>
    <text x="20" y="70" fill="#888" font-family="monospace" font-size="8">NEXUS_PULL_REGISTRY: localhost:5001</text>
    <text x="20" y="85" fill="#888" font-family="monospace" font-size="8">IMAGE_TAG: 1.0.${CI_PIPELINE_IID}</text>
    <text x="20" y="100" fill="#888" font-family="monospace" font-size="8">RELEASE_TAG: 1.0.release-${CI_PIPELINE_IID}</text>
  </g>

  <!-- 8 Pipeline Stages Section -->
  <g transform="translate(50, 220)">
    <text x="0" y="0" fill="#6c5ce7" font-family="Arial, sans-serif" font-size="16" font-weight="bold">8 Pipeline Stages (STAGE_TEMPLATES)</text>

    <!-- Stage 1: Compile -->
    <g filter="url(#shadow)" transform="translate(0, 30)">
      <rect x="0" y="0" width="320" height="180" rx="12" fill="url(#stageGrad)"/>
      <text x="160" y="25" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="13" font-weight="bold">1. COMPILE</text>
      <rect x="10" y="40" width="300" height="130" rx="8" fill="rgba(0,0,0,0.3)"/>
      <text x="20" y="60" fill="#ffd93d" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Image Query:</text>
      <text x="95" y="60" fill="#e0e0e0" font-family="monospace" font-size="8">maven/python/node/golang</text>
      <text x="20" y="80" fill="#ffd93d" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Scripts by Tech:</text>
      <text x="30" y="95" fill="#e0e0e0" font-family="monospace" font-size="7">java: mvn clean package -DskipTests</text>
      <text x="30" y="108" fill="#e0e0e0" font-family="monospace" font-size="7">python: pip install -r requirements.txt</text>
      <text x="30" y="121" fill="#e0e0e0" font-family="monospace" font-size="7">node: npm ci &amp;&amp; npm run build</text>
      <text x="30" y="134" fill="#e0e0e0" font-family="monospace" font-size="7">golang: go build -o app .</text>
      <text x="20" y="155" fill="#81ecec" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Artifacts:</text>
      <text x="80" y="155" fill="#e0e0e0" font-family="monospace" font-size="8">target/, dist/, app</text>
    </g>

    <!-- Stage 2: Build -->
    <g filter="url(#shadow)" transform="translate(340, 30)">
      <rect x="0" y="0" width="320" height="180" rx="12" fill="#e17055"/>
      <text x="160" y="25" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="13" font-weight="bold">2. BUILD</text>
      <rect x="10" y="40" width="300" height="130" rx="8" fill="rgba(0,0,0,0.3)"/>
      <text x="20" y="60" fill="#ffd93d" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Image:</text>
      <text x="60" y="60" fill="#e0e0e0" font-family="monospace" font-size="8">kaniko-project/executor</text>
      <text x="20" y="80" fill="#ffd93d" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Build Method:</text>
      <text x="95" y="80" fill="#e0e0e0" font-family="monospace" font-size="8">Kaniko (rootless)</text>
      <text x="20" y="100" fill="#ffd93d" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Script:</text>
      <text x="30" y="115" fill="#e0e0e0" font-family="monospace" font-size="7">/kaniko/executor</text>
      <text x="30" y="128" fill="#e0e0e0" font-family="monospace" font-size="7">  --context ${CI_PROJECT_DIR}</text>
      <text x="30" y="141" fill="#e0e0e0" font-family="monospace" font-size="7">  --dockerfile Dockerfile</text>
      <text x="30" y="154" fill="#e0e0e0" font-family="monospace" font-size="7">  --destination ${NEXUS_REGISTRY}/...</text>
    </g>

    <!-- Stage 3: Test -->
    <g filter="url(#shadow)" transform="translate(680, 30)">
      <rect x="0" y="0" width="320" height="180" rx="12" fill="#00b894"/>
      <text x="160" y="25" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="13" font-weight="bold">3. TEST</text>
      <rect x="10" y="40" width="300" height="130" rx="8" fill="rgba(0,0,0,0.2)"/>
      <text x="20" y="60" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Image:</text>
      <text x="60" y="60" fill="#006060" font-family="monospace" font-size="8">alpine-curl</text>
      <text x="20" y="80" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Purpose:</text>
      <text x="75" y="80" fill="#006060" font-family="monospace" font-size="8">Verify image in registry</text>
      <text x="20" y="100" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Script:</text>
      <text x="30" y="115" fill="#006060" font-family="monospace" font-size="7">curl -s -o /dev/null -w "%{http_code}"</text>
      <text x="30" y="128" fill="#006060" font-family="monospace" font-size="7">  -u "$USER:$PASS"</text>
      <text x="30" y="141" fill="#006060" font-family="monospace" font-size="7">  "http://${NEXUS}/v2/.../manifests"</text>
      <text x="20" y="160" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Expect:</text>
      <text x="65" y="160" fill="#006060" font-family="monospace" font-size="8">HTTP 200</text>
    </g>

    <!-- Stage 4: SAST -->
    <g filter="url(#shadow)" transform="translate(1020, 30)">
      <rect x="0" y="0" width="320" height="180" rx="12" fill="#0984e3"/>
      <text x="160" y="25" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="13" font-weight="bold">4. SAST</text>
      <rect x="10" y="40" width="300" height="130" rx="8" fill="rgba(0,0,0,0.3)"/>
      <text x="20" y="60" fill="#ffd93d" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Image:</text>
      <text x="60" y="60" fill="#e0e0e0" font-family="monospace" font-size="8">maven (for Java)</text>
      <text x="20" y="80" fill="#ffd93d" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Tools:</text>
      <text x="20" y="100" fill="#e0e0e0" font-family="monospace" font-size="8">SpotBugs - Bug detection</text>
      <text x="20" y="118" fill="#e0e0e0" font-family="monospace" font-size="8">PMD - Code analysis</text>
      <text x="20" y="140" fill="#ffd93d" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Commands:</text>
      <text x="30" y="155" fill="#e0e0e0" font-family="monospace" font-size="7">mvn spotbugs:check pmd:check || true</text>
    </g>
  </g>

  <!-- Stages Row 2 -->
  <g transform="translate(50, 460)">
    <!-- Stage 5: Quality -->
    <g filter="url(#shadow)" transform="translate(0, 0)">
      <rect x="0" y="0" width="320" height="180" rx="12" fill="#9b59b6"/>
      <text x="160" y="25" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="13" font-weight="bold">5. QUALITY</text>
      <rect x="10" y="40" width="300" height="130" rx="8" fill="rgba(0,0,0,0.3)"/>
      <text x="20" y="60" fill="#ffd93d" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Image:</text>
      <text x="60" y="60" fill="#e0e0e0" font-family="monospace" font-size="8">maven / tech-specific</text>
      <text x="20" y="80" fill="#ffd93d" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Tool:</text>
      <text x="55" y="80" fill="#e0e0e0" font-family="monospace" font-size="8">SonarQube</text>
      <text x="20" y="100" fill="#ffd93d" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Endpoint:</text>
      <text x="75" y="100" fill="#e0e0e0" font-family="monospace" font-size="8">ai-sonarqube:9000</text>
      <text x="20" y="120" fill="#ffd93d" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Metrics:</text>
      <text x="30" y="138" fill="#e0e0e0" font-family="monospace" font-size="7">Code coverage, duplications,</text>
      <text x="30" y="151" fill="#e0e0e0" font-family="monospace" font-size="7">complexity, tech debt</text>
    </g>

    <!-- Stage 6: Security -->
    <g filter="url(#shadow)" transform="translate(340, 0)">
      <rect x="0" y="0" width="320" height="180" rx="12" fill="#d63031"/>
      <text x="160" y="25" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="13" font-weight="bold">6. SECURITY</text>
      <rect x="10" y="40" width="300" height="130" rx="8" fill="rgba(0,0,0,0.3)"/>
      <text x="20" y="60" fill="#ffd93d" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Image:</text>
      <text x="60" y="60" fill="#e0e0e0" font-family="monospace" font-size="8">alpine-curl</text>
      <text x="20" y="80" fill="#ffd93d" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Service:</text>
      <text x="70" y="80" fill="#e0e0e0" font-family="monospace" font-size="8">trivy-server:8080</text>
      <text x="20" y="100" fill="#ffd93d" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Scan Type:</text>
      <text x="85" y="100" fill="#e0e0e0" font-family="monospace" font-size="8">Container image</text>
      <text x="20" y="120" fill="#ffd93d" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Severity:</text>
      <text x="75" y="120" fill="#e0e0e0" font-family="monospace" font-size="8">HIGH, CRITICAL</text>
      <text x="20" y="145" fill="#ffd93d" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Command:</text>
      <text x="30" y="160" fill="#e0e0e0" font-family="monospace" font-size="7">trivy image --server http://trivy:8080</text>
    </g>

    <!-- Stage 7: Push -->
    <g filter="url(#shadow)" transform="translate(680, 0)">
      <rect x="0" y="0" width="320" height="180" rx="12" fill="#fdcb6e"/>
      <text x="160" y="25" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="13" font-weight="bold">7. PUSH</text>
      <rect x="10" y="40" width="300" height="130" rx="8" fill="rgba(0,0,0,0.2)"/>
      <text x="20" y="60" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Image:</text>
      <text x="60" y="60" fill="#666" font-family="monospace" font-size="8">alpine-curl</text>
      <text x="20" y="80" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Purpose:</text>
      <text x="75" y="80" fill="#666" font-family="monospace" font-size="8">Tag &amp; push release</text>
      <text x="20" y="100" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Actions:</text>
      <text x="30" y="118" fill="#666" font-family="monospace" font-size="7">1. Get manifest from :latest</text>
      <text x="30" y="131" fill="#666" font-family="monospace" font-size="7">2. PUT manifest as :$RELEASE_TAG</text>
      <text x="20" y="155" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Tag Format:</text>
      <text x="90" y="155" fill="#666" font-family="monospace" font-size="8">1.0.release-${IID}</text>
    </g>

    <!-- Stage 8: Notify -->
    <g filter="url(#shadow)" transform="translate(1020, 0)">
      <rect x="0" y="0" width="320" height="180" rx="12" fill="#00cec9"/>
      <text x="160" y="25" text-anchor="middle" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="13" font-weight="bold">8. NOTIFY</text>
      <rect x="10" y="40" width="300" height="130" rx="8" fill="rgba(0,0,0,0.2)"/>
      <text x="20" y="60" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Image:</text>
      <text x="60" y="60" fill="#006666" font-family="monospace" font-size="8">alpine-curl</text>
      <text x="20" y="80" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Target:</text>
      <text x="60" y="80" fill="#006666" font-family="monospace" font-size="8">Splunk HEC</text>
      <text x="20" y="100" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Endpoint:</text>
      <text x="80" y="100" fill="#006666" font-family="monospace" font-size="8">/services/collector/event</text>
      <text x="20" y="120" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Payload:</text>
      <text x="30" y="138" fill="#006666" font-family="monospace" font-size="7">pipeline_id, status, project,</text>
      <text x="30" y="151" fill="#006666" font-family="monospace" font-size="7">branch, commit</text>
      <text x="20" y="168" fill="#1a1a2e" font-family="Arial, sans-serif" font-size="9" font-weight="bold">Trigger:</text>
      <text x="70" y="168" fill="#006666" font-family="monospace" font-size="8">when: on_success</text>
    </g>
  </g>

  <!-- Supported Languages -->
  <g transform="translate(50, 670)">
    <text x="0" y="0" fill="#e17055" font-family="Arial, sans-serif" font-size="16" font-weight="bold">Supported Technologies &amp; Image Mapping</text>

    <g filter="url(#shadow)" transform="translate(0, 20)">
      <rect x="0" y="0" width="1300" height="210" rx="15" fill="#1a1a2e"/>

      <!-- Language boxes -->
      <g transform="translate(20, 20)">
        <rect x="0" y="0" width="170" height="80" rx="8" fill="url(#langGrad)"/>
        <text x="85" y="25" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Java</text>
        <text x="85" y="45" text-anchor="middle" fill="#e0e0e0" font-family="monospace" font-size="8">image_query: maven</text>
        <text x="85" y="60" text-anchor="middle" fill="#e0e0e0" font-family="monospace" font-size="7">mvn clean package</text>
        <text x="85" y="73" text-anchor="middle" fill="#81ecec" font-family="monospace" font-size="7">artifacts: target/</text>
      </g>

      <g transform="translate(200, 20)">
        <rect x="0" y="0" width="170" height="80" rx="8" fill="#3498db"/>
        <text x="85" y="25" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Python</text>
        <text x="85" y="45" text-anchor="middle" fill="#e0e0e0" font-family="monospace" font-size="8">image_query: python</text>
        <text x="85" y="60" text-anchor="middle" fill="#e0e0e0" font-family="monospace" font-size="7">pip install -r reqs</text>
        <text x="85" y="73" text-anchor="middle" fill="#81ecec" font-family="monospace" font-size="7">artifacts: .</text>
      </g>

      <g transform="translate(380, 20)">
        <rect x="0" y="0" width="170" height="80" rx="8" fill="#27ae60"/>
        <text x="85" y="25" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Node.js</text>
        <text x="85" y="45" text-anchor="middle" fill="#e0e0e0" font-family="monospace" font-size="8">image_query: node</text>
        <text x="85" y="60" text-anchor="middle" fill="#e0e0e0" font-family="monospace" font-size="7">npm ci &amp;&amp; npm build</text>
        <text x="85" y="73" text-anchor="middle" fill="#81ecec" font-family="monospace" font-size="7">artifacts: dist/</text>
      </g>

      <g transform="translate(560, 20)">
        <rect x="0" y="0" width="170" height="80" rx="8" fill="#00bcd4"/>
        <text x="85" y="25" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Golang</text>
        <text x="85" y="45" text-anchor="middle" fill="#e0e0e0" font-family="monospace" font-size="8">image_query: golang</text>
        <text x="85" y="60" text-anchor="middle" fill="#e0e0e0" font-family="monospace" font-size="7">go build -o app</text>
        <text x="85" y="73" text-anchor="middle" fill="#81ecec" font-family="monospace" font-size="7">artifacts: app</text>
      </g>

      <g transform="translate(740, 20)">
        <rect x="0" y="0" width="170" height="80" rx="8" fill="#9b59b6"/>
        <text x="85" y="25" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="12" font-weight="bold">PHP</text>
        <text x="85" y="45" text-anchor="middle" fill="#e0e0e0" font-family="monospace" font-size="8">image_query: php</text>
        <text x="85" y="60" text-anchor="middle" fill="#e0e0e0" font-family="monospace" font-size="7">composer install</text>
        <text x="85" y="73" text-anchor="middle" fill="#81ecec" font-family="monospace" font-size="7">artifacts: vendor/</text>
      </g>

      <g transform="translate(920, 20)">
        <rect x="0" y="0" width="170" height="80" rx="8" fill="#512da8"/>
        <text x="85" y="25" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="12" font-weight="bold">.NET</text>
        <text x="85" y="45" text-anchor="middle" fill="#e0e0e0" font-family="monospace" font-size="8">image_query: dotnet</text>
        <text x="85" y="60" text-anchor="middle" fill="#e0e0e0" font-family="monospace" font-size="7">dotnet publish -c Rel</text>
        <text x="85" y="73" text-anchor="middle" fill="#81ecec" font-family="monospace" font-size="7">artifacts: out/</text>
      </g>

      <g transform="translate(1100, 20)">
        <rect x="0" y="0" width="170" height="80" rx="8" fill="#d84315"/>
        <text x="85" y="25" text-anchor="middle" fill="#fff" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Rust</text>
        <text x="85" y="45" text-anchor="middle" fill="#e0e0e0" font-family="monospace" font-size="8">image_query: rust</text>
        <text x="85" y="60" text-anchor="middle" fill="#e0e0e0" font-family="monospace" font-size="7">cargo build --release</text>
        <text x="85" y="73" text-anchor="middle" fill="#81ecec" font-family="monospace" font-size="7">artifacts: app</text>
      </g>

      <!-- Nexus Image Resolution -->
      <rect x="20" y="115" width="1260" height="80" rx="10" fill="rgba(255,255,255,0.05)"/>
      <text x="40" y="140" fill="#ffd93d" font-family="Arial, sans-serif" font-size="12" font-weight="bold">Nexus Registry Image Resolution Flow:</text>
      <text x="40" y="165" fill="#888" font-family="monospace" font-size="10">1. GET /v2/_catalog â†’ Get all repositories</text>
      <text x="450" y="165" fill="#888" font-family="monospace" font-size="10">2. Filter by image_query keyword</text>
      <text x="750" y="165" fill="#888" font-family="monospace" font-size="10">3. GET /v2/{repo}/tags/list</text>
      <text x="1000" y="165" fill="#888" font-family="monospace" font-size="10">4. Return: localhost:5001/{repo}:{tag}</text>
    </g>
  </g>

  <!-- Footer -->
  <text x="700" y="930" text-anchor="middle" fill="#555" font-family="Arial, sans-serif" font-size="11">AI-Powered DevOps Platform | Pipeline Generator Tool | 8-Stage CI/CD Pipeline Generation</text>
</svg>